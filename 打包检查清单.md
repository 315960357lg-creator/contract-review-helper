# 打包前检查清单

在开始打包前，请确认以下项目：

## ✅ 环境准备

- [ ] 已安装Python 3.8或更高版本
- [ ] Python已添加到PATH环境变量
- [ ] 项目代码完整（所有Python文件都在）
- [ ] requirements.txt文件存在且完整
- [ ] 有稳定的网络连接（下载依赖）

## ✅ 文件检查

在项目根目录确认以下文件：

### 核心文件
- [ ] `launch.py` - 主启动文件
- [ ] `config.py` - 配置模块
- [ ] `main_window.py` - 简洁版界面
- [ ] `main_window_pro.py` - 专业版界面
- [ ] `ai_engine.py` - AI引擎
- [ ] `review_workflow.py` - 审查工作流
- [ ] `document_parser.py` - 文档解析
- [ ] `report_generator.py` - 报告生成
- [ ] `history_manager.py` - 历史记录管理
- [ ] `prompts.py` - 提示词模板

### 配置文件
- [ ] `.env.example` - 配置模板
- [ ] `requirements.txt` - Python依赖
- [ ] `build.spec` - PyInstaller配置

### 打包脚本
- [ ] `build_windows.bat` - 自动打包脚本
- [ ] `installer/build_installer.bat` - 安装制作
- [ ] `installer/build_all.bat` - 完整打包

### 资源文件
- [ ] `assets/` 文件夹存在
- [ ] `assets/app_icon.png` - 程序图标（可选）

### 文档
- [ ] `用户安装指南.md` - 用户文档
- [ ] `打包说明.md` - 打包文档

## ✅ 功能测试（打包前测试）

在打包前，建议先在开发环境测试：

```batch
# 安装依赖
pip install -r requirements.txt

# 运行程序
python launch.py
```

测试项目：
- [ ] 程序能正常启动
- [ ] 版本选择界面正常
- [ ] 专业版界面打开正常
- [ ] 简洁版界面打开正常
- [ ] 文件上传功能正常
- [ ] AI配置功能正常

## ✅ 打包步骤

### 1. 快速打包（推荐）

```batch
# 双击运行
installer\build_all.bat
```

### 2. 手动打包

```batch
# 安装打包工具
pip install pyinstaller==6.3.0

# 安装依赖
pip install -r requirements.txt

# 执行打包
pyinstaller build.spec --clean
```

## ✅ 打包后测试

打包完成后，**必须**测试：

### 基础测试
- [ ] `dist/合同审查小助手.exe` 文件存在
- [ ] 文件大小在100-250MB之间
- [ ] 双击能启动程序
- [ ] 没有控制台错误信息

### 功能测试
- [ ] 版本选择界面显示正常（淡绿色背景）
- [ ] 能选择专业版
- [ ] 能选择简洁版
- [ ] 界面显示正常（白色主题）
- [ ] 左侧文件列表正常
- [ ] 中间配置区正常
- [ ] 右侧AI交互区正常

### 核心功能测试（需要配置AI后测试）
- [ ] 文件拖放上传
- [ ] 配置审查参数
- [ ] 开始审查按钮
- [ ] 历史记录查看
- [ ] 配置功能

## ✅ 发布准备

### 文件准备
- [ ] 可执行文件：`合同审查小助手.exe`
- [ ] 用户文档：`用户安装指南.md`
- [ ] 配置模板：`.env.example`

### 打包选项（选择一种）

#### 选项A：单文件分发
```
分发: 合同审查小助手.exe
说明: 最简单，双击即用
```

#### 选项B：便携版
```
分发: release/便携版/ 整个文件夹
说明: 包含完整说明，更友好
```

#### 选项C：安装程序
```
分发: 合同审查小助手_安装程序.exe
说明: 专业安装向导，推荐企业使用
```

## ⚠️ 常见问题

### 打包失败
```
问题: PyInstaller报错
解决:
1. 确认Python版本（3.8+）
2. 更新pip: python -m pip install --upgrade pip
3. 清理缓存: pyinstaller build.spec --clean
```

### 运行失败
```
问题: exe无法启动
解决:
1. 检查是否在Windows环境打包
2. 查看是否有杀毒软件拦截
3. 以管理员身份运行
```

### 文件太大
```
问题: exe超过300MB
解决:
1. 确认启用了UPX压缩
2. 检查是否包含了不必要的依赖
3. 考虑使用虚拟环境打包
```

## 📋 打包记录

记录每次打包的信息：

```
打包日期：_____________
Python版本：_____________
PyInstaller版本：_____________
打包方式：□ build_all.bat □ 手动
输出文件大小：_____________ MB
测试结果：□ 通过 □ 部分通过 □ 失败
备注：_____________
```

## ✅ 完成确认

打包成功后，您应该有：

- [ ] 可执行的 `合同审查小助手.exe` 文件
- [ ] 完整的用户文档
- [ ] 经过功能测试确认可用
- [ ] 准备好分发给用户

---

**准备就绪？开始打包吧！** 🚀

```batch
installer\build_all.bat
```
