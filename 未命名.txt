开发一个“合同审查小助手”是一个非常实用的切入点。法律行业对隐私和准确性要求极高，因此你的设计需要兼顾**易用性**、**模块化**以及**本地化扩展能力**。

以下我为你设计的桌面软件框架，涵盖了技术架构、核心流程以及你需要的提示词工程。

---

## 一、 软件架构设计

为了保证软件的可扩展性，建议采用**前后端分离**的本地架构：

* **前端 (UI层):** 推荐使用 **PyQt6** 或 **Electron**。需要简洁的仪表盘，支持拖拽上传。
* **业务逻辑层:** 处理文件解析（PDF/Word转文本）、任务分发、提示词拼接。
* **AI 适配层:** 封装统一接口，支持切换 OpenAI/DeepSeek API 或本地 **Ollama (Llama3/Qwen2)**。
* **存储/导出层:** 缓存审查记录，支持导出为 Word、PDF 或 Markdown。

---

## 二、 核心功能模块

### 1. 预处理与要点细化 (Step 1)

这是你提到的“将用户要求转化为审查点”的功能。

* **功能：** 用户上传合同后，输入一句简单的要求（如“我是乙方，重点看回款周期”）。
* **逻辑：** 系统先调用 LLM 1（需求分析员），将模糊要求转化为结构化的《审查清单》。

### 2. 深度审查 (Step 2)

* **逻辑：** 利用你提供的“Lawyer”提示词，结合 Step 1 生成的清单，对合同全文进行逐项扫描。

### 3. 文档生成 (Step 3)

* **功能：** 将 AI 的分析结果按照“问题-风险-建议-修改后条款”进行排版，生成对比文档。

---

## 三、 提示词工程 (Prompt Engineering)

根据你的需求，我为你设计了两套提示词，分别对应“任务转化”和“深度审查”。

### 提示词 A：任务细化专家 (The Planner)

**用途：** 将用户的简单想法转化为具体的审查颗粒度。

```markdown
## Role: 资深法务专家
## Task: 审查需求转化
## Input: 
1. 客户基本身份 (甲/乙方)
2. 合同类型 (如：劳动合同、采购合同)
3. 客户关注点 (如：我担心付款时间太长)

## Workflow:
1. 分析客户身份及其核心利益诉求。
2. 针对该合同类型，列出5-8个必须审查的标准维度（如：主体资格、违约责任、争议管辖等）。
3. 将客户的“关注点”转化为具体的法律审查动作。

## Output Format (JSON):
{
  "contract_focus": ["维度1", "维度2"],
  "specific_checks": [
    {"point": "具体审查点名称", "logic": "审查逻辑描述"}
  ]
}

```

### 提示词 B：合同审查律师 (The Reviewer)

**用途：** 针对具体内容进行审查（在你提供的版本上进行了优化，使其更适合程序调用）。

> **注意：** 在程序中调用时，你需要将 **Step A 生成的审查点** 注入到这个提示词的 `Attention` 部分。

```markdown
## Role: 资深执业律师
## Profile: 你擅长识别合同陷阱，保护客户利益，语言专业严谨。

## Context:
- 客户身份: {{client_role}}
- 审查重点清单: {{checklist_from_step_A}}

## Goals:
- 严格依据中国现行法律（民法典等）进行合规性审查。
- 重点识别对客户不利的“不平等条约”。
- 提供可直接复制替换的修改建议条款。

## Workflows:
1. 扫描合同全文。
2. 对照 {{checklist_from_step_A}} 逐条核对。
3. 按照“发现问题 -> 风险分析 -> 修改建议 -> 修改后条款”输出。

## Output (Markdown):
### 一、 核心风险提示
- 风险点1: {具体条款引用}
- 风险分析: {解释为什么不利}
### 二、 修改方案对比
| 原条款内容 | 修改建议 | 修改后建议文本 |
| :--- | :--- | :--- |
| {{原文}} | {{理由}} | {{建议文本}} |

```

---

## 四、 技术栈推荐

| 模块 | 推荐工具 | 理由 |
| --- | --- | --- |
| **界面开发** | **PySide6 (Python)** | 与 AI 逻辑集成最快，支持跨平台。 |
| **文档解析** | **python-docx / PyMuPDF** | 处理 .docx 和 .pdf 的行业标准。 |
| **大模型框架** | **LangChain / LangGraph** | 方便处理“多步分析”逻辑（先生成清单，再审查）。 |
| **本地模型** | **Ollama (Qwen2.5-7B-Instruct)** | 中文法律理解能力极强，且保护隐私。 |
| **报告生成** | **Docxtpl** | 可以根据 Word 模板直接生成精美的法律意见书。 |

---

## 五、 关键业务流设计

1. **文件读取：** 软件读取 Word 文档，将文本切分为“通用条款”和“核心条款”。
2. **交互确认：** UI 弹窗显示“AI 建议的审查要点”，用户可以勾选或添加（如：勾选“知识产权保护”）。
3. **流式审查：** 点击开始，前端显示 AI 正在审查的进度条。
4. **结果对比：** 左右双栏显示，左边是原文，右边是 AI 的批注和修改。

---

## 六、 下一步行动建议

为了让这个项目落地，建议你按照以下步骤操作：

1. **第一步：** 编写一个 Python 脚本，测试 **提示词 A** 能否准确把你输入的“白话”转为具体的“法律审查点”。
2. **第二步：** 使用 `python-docx` 尝试提取合同中的特定段落。
3. **第三步：** 搭建一个简单的 PyQt 窗口，实现文件的拖拽上传功能。

**你想让我帮你写一段 Python 代码来实现“提示词 A”的需求转化逻辑，还是帮你设计 UI 界面的草图？**